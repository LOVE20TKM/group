# LOVE20 é“¾ç¾¤ï¼ˆåŸºäº ERC721 æ ‡å‡†ï¼‰

åŸºäº LOVE20 core åè®®çš„ç”Ÿæ€è¡ç”Ÿåè®®

## ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- æ°¸ä¹…å­˜åœ¨ï¼šé“¾ç¾¤ä¸€æ—¦å»ºç«‹ï¼Œæ°¸ä¹…å­˜åœ¨
- å”¯ä¸€æ€§ä¿è¯ï¼šæ¯ä¸ªé“¾ç¾¤åç§°å…¨å±€å”¯ä¸€ï¼Œä¸å¯é‡å¤é“¸é€ 
- NFT èµ„äº§åŒ–ï¼šåŸºäº ERC721 æ ‡å‡†ï¼Œæ”¯æŒè‡ªç”±è½¬è®©å’Œäº¤æ˜“
- åŠ¨æ€å®šä»·ï¼šé“¸é€ æˆæœ¬éš LOVE20 ä¾›åº”é‡åŠ¨æ€è°ƒæ•´
- åç§°æ¿€åŠ±ï¼šçŸ­åç§°éœ€è¦æ›´é«˜æˆæœ¬ï¼Œé¼“åŠ±æœ‰æ„ä¹‰çš„é•¿åç§°
- å®Œæ•´æšä¸¾ï¼šæ”¯æŒ ERC721Enumerable æ‰©å±•ï¼Œå¯éå†æ‰€æœ‰é“¾ç¾¤
- çµæ´»é…ç½®ï¼šå…³é”®å‚æ•°å¯åœ¨éƒ¨ç½²æ—¶é…ç½®ï¼Œé€‚åº”ä¸åŒåœºæ™¯éœ€æ±‚

## åº”ç”¨åœºæ™¯

- é“¾ç¾¤æ‰€æœ‰æƒç®¡ç†ï¼šä»£è¡¨é“¾ç¾¤çš„å”¯ä¸€èº«ä»½å’Œæ‰€æœ‰æƒå‡­è¯
- æƒç›Šè½¬è®©ï¼šé€šè¿‡ NFT è½¬è®©å®ç°é“¾ç¾¤ç»è¥æƒã€æ”¶ç›Šæƒçš„æµè½¬
- ç”Ÿæ€é›†æˆï¼šä¸º LOVE20 ç”Ÿæ€ä¸­çš„ç¾¤ç±»åè®®æä¾›ç»Ÿä¸€çš„èº«ä»½ç³»ç»Ÿ
- ä»·å€¼å‘ç°ï¼šç¨€ç¼ºå’Œæœ‰æ„ä¹‰çš„é“¾ç¾¤åç§°å¯èƒ½å…·æœ‰å¸‚åœºä»·å€¼

## é“¸é€ 

ä»»ä½•äººéƒ½å¯ä»¥æ”¯ä»˜ä¸€å®šæ•°é‡çš„ LOVE20 ä»£å¸ï¼Œæ¥é“¸é€ ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„é“¾ç¾¤ï¼Œå¹¶åœ¨ä»»ä½•æ”¯æŒæ­¤åè®®çš„ç¾¤ç±»æ‰©å±•åè®®ä¸­ï¼Œè¡Œä½¿ç¾¤ä¸»çš„æƒåŠ›

é“¸é€ æ—¶éœ€æä¾›ä¸€ä¸ªæœªé“¸é€ è¿‡çš„é“¾ç¾¤åç§°

### é“¾ç¾¤åç§°è§„åˆ™

é“¾ç¾¤åç§°éœ€éµå¾ªä»¥ä¸‹éªŒè¯è§„åˆ™ï¼š

- âœ… é•¿åº¦é™åˆ¶ï¼š1-64 å­—èŠ‚ï¼ˆUTF-8 ç¼–ç ï¼‰
- âœ… æ”¯æŒå­—ç¬¦ï¼šå­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šç¬¦å·ï¼ˆæ‰€æœ‰ ASCII å¯æ‰“å°å­—ç¬¦ï¼‰ã€ä¸­æ–‡ç­‰ Unicode å­—ç¬¦
- âœ… å•ç ç‚¹è¡¨æƒ…ç¬¦å·ï¼šæ”¯æŒå¦‚ ğŸ˜€ã€ğŸ‰ã€â¤ï¸ ç­‰å•ä¸ªç ç‚¹çš„ Emoji
- âš ï¸ å¤åˆ Emoji ä¸æ”¯æŒï¼šéœ€è¦ ZWJï¼ˆé›¶å®½è¿æ¥ç¬¦ï¼‰çš„å¤åˆ Emojiï¼ˆå¦‚ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ï¼‰ä¸è¢«æ”¯æŒ
- âœ… å”¯ä¸€æ€§æ£€æŸ¥ï¼šä»…å¯¹ ASCII å­—æ¯å¤§å°å†™ä¸æ•æ„Ÿï¼ˆ`A-Z` ä¸ `a-z` ç­‰ä»·ï¼›ä¸åš Unicode casefold/è§„èŒƒåŒ–ï¼‰
- âŒ ç¦æ­¢å†…å®¹ï¼š
  - ç©ºåç§°æˆ–è¶…è¿‡ 64 å­—èŠ‚çš„åç§°
  - ä»»ä½•ä½ç½®çš„ç©ºæ ¼å­—ç¬¦ï¼ˆåŒ…æ‹¬ ASCII ç©ºæ ¼å’Œæ‰€æœ‰ Unicode ç©ºæ ¼ï¼‰
  - æ§åˆ¶å­—ç¬¦ï¼ˆåŒ…æ‹¬ C0ã€C1 æ§åˆ¶å­—ç¬¦å’Œ DELï¼‰
  - é›¶å®½å­—ç¬¦ï¼ˆU+200B-U+200Fã€U+034Fã€U+FEFFã€U+2060ã€U+00ADï¼‰
  - è¡Œåˆ†éš”ç¬¦å’Œæ®µè½åˆ†éš”ç¬¦ï¼ˆU+2028ã€U+2029ï¼‰
  - æ–¹å‘æ ¼å¼åŒ–å­—ç¬¦ï¼ˆU+061Cã€U+202A-U+202Eï¼‰

**è¢«ç¦æ­¢çš„ç©ºæ ¼å­—ç¬¦åŒ…æ‹¬ï¼š**

- ASCII ç©ºæ ¼ (U+0020)
- ä¸æ¢è¡Œç©ºæ ¼ (U+00A0)
- Ogham ç©ºæ ¼æ ‡è®° (U+1680)
- En/Em ç©ºæ ¼ç³»åˆ— (U+2000-U+200A)
- çª„ä¸æ¢è¡Œç©ºæ ¼ (U+202F)
- ä¸­ç­‰æ•°å­¦ç©ºæ ¼ (U+205F)
- ä¸­æ–‡å…¨è§’ç©ºæ ¼ (U+3000)

å®‰å…¨ç‰¹æ€§ï¼šç³»ç»Ÿå®ç°äº†å®Œæ•´çš„å­—ç¬¦éªŒè¯ï¼Œæœ‰æ•ˆé˜²æ­¢ï¼š

- **æ§åˆ¶å­—ç¬¦æ³¨å…¥**ï¼šæ‹’ç»æ‰€æœ‰ ASCII å’Œ Unicode æ§åˆ¶å­—ç¬¦
- **ç©ºæ ¼æ··æ·†æ”»å‡»**ï¼šæ‹’ç»æ‰€æœ‰ç±»å‹çš„ Unicode ç©ºæ ¼å­—ç¬¦
- **é›¶å®½å­—ç¬¦æ··æ·†**ï¼šæ‹’ç»æ‰€æœ‰é›¶å®½å’Œä¸å¯è§å­—ç¬¦
- **æ–¹å‘æ ‡è®°æ”»å‡»**ï¼šæ‹’ç»åŒå‘æ–‡æœ¬è¦†ç›–å’Œæ–¹å‘æ ¼å¼åŒ–å­—ç¬¦
- **è§†è§‰æ¬ºéª—**ï¼šé˜²æ­¢ä½¿ç”¨ä¸å¯è§å­—ç¬¦åˆ›å»ºçœ‹ä¼¼ç›¸åŒçš„åç§°

âš ï¸ **æç¤º**ï¼šä»å¯èƒ½å­˜åœ¨åŒå½¢å¼‚ä¹‰å­—ç¬¦ï¼ˆhomograph/confusablesï¼‰å¯¼è‡´çš„è§†è§‰æ··æ·†é£é™©ï¼Œå»ºè®®é›†æˆæ–¹åœ¨å‰ç«¯/ç´¢å¼•å±‚åšé£é™©æç¤ºã€‚è¯¦è§ [é“¾ç¾¤åç§°æ ¡éªŒè§„åˆ™](./docs/é“¾ç¾¤åç§°æ ¡éªŒè§„åˆ™.md)ã€‚

è¯¦ç»†è§„åˆ™è¯·å‚è€ƒ [é“¾ç¾¤åç§°æ ¡éªŒè§„åˆ™](./docs/é“¾ç¾¤åç§°æ ¡éªŒè§„åˆ™.md)

### é“¸é€ è´¹ç”¨

æ¯æ¬¡é“¸é€ éœ€æ”¯ä»˜ä¸€å®šæ•°é‡çš„ LOVE20 ä»£å¸ç»™åˆ°åˆçº¦ï¼Œå¹¶å°†è¿™éƒ¨åˆ†ä»£å¸é”€æ¯å˜ä¸ºæœªé“¸é€ ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š

é“¸é€ åŸºç¡€è´¹ç”¨ = LOVE20 å‰©ä½™æœªé“¸é€ é‡ / 10^8

å¯¹äºé“¾ç¾¤åç§°å­—èŠ‚æ•° >= 8 å­—èŠ‚ï¼Œåªæ”¶å–åŸºç¡€è´¹ç”¨
å¯¹äºé“¾ç¾¤åç§°å­—èŠ‚æ•° < 8 å­—èŠ‚çš„ï¼Œæ¯æ¯” 8 å­—èŠ‚å°‘ 1 ä¸ªå­—èŠ‚ï¼Œåˆ™æ‰€éœ€ä»£å¸æ•°é‡ \* 10

ä¾‹å¦‚ï¼Œå½“ LOVE20 å‰©ä½™æœªé“¸é€ é‡ä¸º 80 äº¿æ—¶ï¼Œä¸åŒé“¾ç¾¤åç§°å­—èŠ‚æ•°å¯¹åº”çš„é“¸é€ è´¹ç”¨å¦‚ä¸‹ï¼š

| å­—èŠ‚æ•° | é“¸é€ éœ€ LOVE20 ä¸ªæ•° |
| ------ | ------------------ |
| 9+     | 80                 |
| 8      | 80                 |
| 7      | 800                |
| 6      | 8,000              |
| 5      | 80,000             |
| 4      | 800,000            |
| 3      | 8,000,000          |
| 2      | 80,000,000         |

âš ï¸ **æ³¨æ„**ï¼šå­—èŠ‚æ•° 1-3 çš„æçŸ­åç§°é“¸é€ æˆæœ¬æé«˜ï¼ˆè¿œè¶… LOVE20 æœ€å¤§ä¾›åº”é‡ï¼‰ï¼Œå®é™…ä¸Šæ— æ³•é“¸é€ ã€‚è¿™æ˜¯æœ‰æ„çš„è®¾è®¡ï¼Œé¼“åŠ±ä½¿ç”¨æ›´æœ‰æ„ä¹‰çš„é•¿åç§°ã€‚

å­—ç¬¦ä¸å­—èŠ‚å‚è€ƒï¼š

- è‹±æ–‡å­—æ¯ã€æ•°å­—ã€å¸¸è§ç¬¦å·ï¼šå ç”¨ 1 ä¸ªå­—èŠ‚ï¼ˆä¸ ASCII å…¼å®¹ï¼‰
- æ¬§æ´²ã€ä¸­ä¸œç­‰è¯­è¨€çš„å¤§éƒ¨åˆ†å­—ç¬¦ï¼šå ç”¨ 2 ä¸ªå­—èŠ‚
- ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰ï¼ˆCJKï¼‰å­—ç¬¦ï¼šå ç”¨ 3 ä¸ªå­—èŠ‚
- å•ç ç‚¹è¡¨æƒ…ç¬¦å·ï¼šé€šå¸¸å ç”¨ 4 ä¸ªå­—èŠ‚ï¼ˆå¤åˆ Emoji ä¸æ”¯æŒï¼‰

## åˆçº¦éƒ¨ç½²

### å‰ç½®è¦æ±‚

1. å®‰è£… [Foundry](https://book.getfoundry.sh/getting-started/installation)
2. é…ç½®ç½‘ç»œå‚æ•°å’Œè´¦æˆ·ä¿¡æ¯

### ç½‘ç»œé…ç½®

åœ¨ `script/network/<ç½‘ç»œåç§°>/` ç›®å½•ä¸‹éœ€è¦ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

- `.account` - è´¦æˆ·é…ç½®ï¼ˆkeystore è´¦æˆ·åå’Œåœ°å€ï¼‰
- `network.params` - ç½‘ç»œå‚æ•°ï¼ˆRPC URLã€é“¾ IDã€åŒºå—æµè§ˆå™¨é…ç½®ç­‰ï¼‰
- `group.params` - Group å®Œæ•´é…ç½®ï¼ˆLOVE20 åœ°å€ã€åˆçº¦å‚æ•°ï¼‰
- `address.group.params` - Group åˆçº¦åœ°å€ï¼ˆéƒ¨ç½²åè‡ªåŠ¨ç”Ÿæˆï¼‰

#### Group é…ç½®è¯´æ˜

`group.params` æ˜¯å”¯ä¸€éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰éƒ¨ç½²å‚æ•°ï¼š

```bash
# LOVE20 Token åœ°å€ï¼ˆå¿…éœ€ï¼‰
LOVE20_TOKEN_ADDRESS=0x...

# åˆçº¦å‚æ•°ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰
BASE_DIVISOR=100000000        # åŸºç¡€é™¤æ•°ï¼ˆ1e8ï¼‰ï¼Œç”¨äºè®¡ç®—é“¸é€ æˆæœ¬
BYTES_THRESHOLD=8             # å­—èŠ‚é˜ˆå€¼ï¼Œåç§° >= æ­¤é•¿åº¦åªéœ€åŸºç¡€è´¹ç”¨
MULTIPLIER=10                 # å€æ•°ï¼Œæ¯å°‘äºé˜ˆå€¼ 1 å­—èŠ‚ï¼Œæˆæœ¬ä¹˜ä»¥æ­¤å€¼
MAX_GROUP_NAME_LENGTH=64      # é“¾ç¾¤åç§°æœ€å¤§é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰
```

**æ³¨æ„**ï¼šæ‰€æœ‰å‚æ•°åœ¨åˆçº¦éƒ¨ç½²æ—¶è®¾ç½®ï¼Œéƒ¨ç½²åæ°¸ä¹…ä¸å¯æ›´æ”¹ã€‚

é¡¹ç›®å·²åŒ…å«ä»¥ä¸‹ç½‘ç»œé…ç½®ï¼š

- `anvil` - æœ¬åœ°æµ‹è¯•ç½‘ç»œ
- `thinkium70001_public` - Thinkium ä¸»ç½‘
- `thinkium70001_public_test` - Thinkium æµ‹è¯•ç½‘

### ä¸€é”®éƒ¨ç½²

è¿›å…¥éƒ¨ç½²è„šæœ¬ç›®å½•å¹¶æ‰§è¡Œï¼š

```bash
cd script/deploy
source one_click_deploy.sh <ç½‘ç»œåç§°>
```

ä¾‹å¦‚ï¼Œéƒ¨ç½²åˆ° Thinkium ä¸»ç½‘æµ‹è¯•ï¼š

```bash
source one_click_deploy.sh thinkium70001_public_test
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. **åˆå§‹åŒ–ç¯å¢ƒ** - åŠ è½½ç½‘ç»œé…ç½®å’Œè´¦æˆ·ä¿¡æ¯
2. **éƒ¨ç½²åˆçº¦** - éƒ¨ç½² Group åˆçº¦å¹¶ä¿å­˜åœ°å€
3. **éªŒè¯åˆçº¦** - åœ¨åŒºå—æµè§ˆå™¨ä¸ŠéªŒè¯åˆçº¦æºç ï¼ˆä»… Thinkium ç½‘ç»œï¼‰
4. **æ£€æŸ¥é…ç½®** - éªŒè¯åˆçº¦éƒ¨ç½²æ­£ç¡®æ€§

### åˆ†æ­¥éƒ¨ç½²

å¦‚æœéœ€è¦å•ç‹¬æ‰§è¡ŒæŸä¸ªæ­¥éª¤ï¼š

```bash
cd script/deploy

# 1. åˆå§‹åŒ–ç¯å¢ƒ
source 00_init.sh <ç½‘ç»œåç§°>

# 2. éƒ¨ç½² Group åˆçº¦
forge_script_deploy_group

# 3. éªŒè¯åˆçº¦ï¼ˆä»… Thinkium ç½‘ç»œï¼‰
source 03_verify.sh

# 4. æ£€æŸ¥éƒ¨ç½²
source 99_check.sh
```

### æŸ¥è¯¢ä¿¡æ¯

ä½¿ç”¨ `cast` å‘½ä»¤æŸ¥è¯¢åˆçº¦ä¿¡æ¯ï¼š

```bash
# è®¾ç½®å˜é‡ï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ï¼‰
groupAddress=0x...  # Group åˆçº¦åœ°å€
RPC_URL=https://proxy1.thinkiumrpc.net

# æŸ¥è¯¢åˆçº¦åŸºæœ¬ä¿¡æ¯
cast call $groupAddress "name()(string)" --rpc-url $RPC_URL
cast call $groupAddress "symbol()(string)" --rpc-url $RPC_URL
cast call $groupAddress "LOVE20_TOKEN_ADDRESS()(address)" --rpc-url $RPC_URL
cast call $groupAddress "totalSupply()(uint256)" --rpc-url $RPC_URL

# æŸ¥è¯¢ç‰¹å®š token ä¿¡æ¯
cast call $groupAddress "ownerOf(uint256)(address)" 1 --rpc-url $RPC_URL
cast call $groupAddress "groupNameOf(uint256)(string)" 1 --rpc-url $RPC_URL

# æŸ¥è¯¢é“¾ç¾¤åç§°æ˜¯å¦å·²è¢«ä½¿ç”¨
cast call $groupAddress "isGroupNameUsed(string)(bool)" "MyGroup" --rpc-url $RPC_URL

# é€šè¿‡åç§°æŸ¥è¯¢ token ID
cast call $groupAddress "tokenIdOf(string)(uint256)" "MyGroup" --rpc-url $RPC_URL

# è®¡ç®—é“¸é€ æˆæœ¬
cast call $groupAddress "calculateMintCost(string)(uint256)" "MyGroup" --rpc-url $RPC_URL
```

### é“¸é€ 

ä½¿ç”¨ `cast` å‘½ä»¤é“¸é€ é“¾ç¾¤ï¼š

````bash
# è®¾ç½®å˜é‡
groupAddress=0x...             # Group åˆçº¦åœ°å€
LOVE20_TOKEN_ADDRESS=0x...     # LOVE20 token åœ°å€
GROUP_NAME="YourGroup"         # é“¾ç¾¤åç§°
RPC_URL=https://proxy1.thinkiumrpc.net

# 1. è®¡ç®—é“¸é€ æˆæœ¬
MINT_COST=$(cast call $groupAddress "calculateMintCost(string)(uint256)" "$GROUP_NAME" --rpc-url $RPC_URL)
echo "Mint cost: $MINT_COST"

# 2. æ‰¹å‡† LOVE20 ä»£å¸ï¼ˆä½¿ç”¨ keystore è´¦æˆ·ï¼‰
cast send $LOVE20_TOKEN_ADDRESS \
  "approve(address,uint256)" \
  $groupAddress $MINT_COST \
  --rpc-url $RPC_URL \
  --account myaccount \
  --gas-price 5000000000 \
  --legacy

# 3. é“¸é€ é“¾ç¾¤
cast send $groupAddress \
  "mint(string)(uint256)" \
  "$GROUP_NAME" \
  --rpc-url $RPC_URL \
  --account myaccount \
  --gas-price 5000000000 \
  --legacy

## å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
forge test
````

### ç¼–è¯‘åˆçº¦

```bash
forge build
```
